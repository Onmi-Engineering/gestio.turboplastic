<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>

        <record id="menu_action_funcion_sale_vs_purchase" model="ir.actions.server">
            <field name="name">Update Benefits</field>
            <field name="model_id" ref="model_account_move"/>
            <field name="type">ir.actions.server</field>
            <field name="state">code</field>
            <field name="code">
                 records.update_benefits()
            </field>
            <field name="binding_model_id" ref="model_account_move"/>
        </record> 

        <!-- Vista heredada res_partner para incluir campo coordinator y commissionable_amount -->
        <record id="onmi_account_move_form_inherit_add_price" model="ir.ui.view">
            <field name="name">onmi_cosmi_commercial.account_move.form.inherit.add_price</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//notebook" position="inside">
                    <page name="PURCHASES" string="Purchases" invisible="move_type != 'out_invoice'">
                        <!-- <group>
                            <field name="margin" string="Margin" />
                            <field name="percentaje" widget="percentage"/>
                            <field name="rec_invoice" string="Rec invoice"/>
                        </group>                    -->
                            <field name="invoice_margin_ids" widget="section_and_note_one2many">
                                <list editable="bottom">
                                    <field name="invoice_id" domain="['|', ('move_type', '=', 'in_invoice'),('move_type', '=', 'in_refund')]"/>                          
                                    <field name="total"/>
                                </list>
                            </field>                            
                    </page>
                </xpath>
            </field>
        </record> 

        <record id="account.action_move_out_invoice_type" model="ir.actions.act_window"> 
            <field name="view_mode">list,kanban,form,pivot</field>
        </record>

        <record id="onmi_view_move_pivot_sales_vs_purchase" model="ir.ui.view">
            <field name="name">onmi.account.move.pivot.sales.vs.purchase</field>
            <field name="model">account.move</field>
            <field name="arch" type="xml">
                <pivot string="Margen de benefÃ­cios" sample="1">
                    <field name="invoice_margin_ids"/>
                    <field name="margin" type="measure"/>
                    <field name="percentaje" widget="percentage" type="measure"/>
                    <field name="name" type="row"/>                 
                </pivot>
            </field>

        </record>
    </data>
</odoo>